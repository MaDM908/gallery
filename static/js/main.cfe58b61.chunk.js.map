{"version":3,"sources":["redux/gallery-reducer.js","redux/store.js","components/common/Loader/Loader.jsx","components/Gallery/Gallery.jsx","components/common/formsControls/formControls.js","components/Upload/Upload.jsx","components/Footer/Footer.jsx","components/Navbar/Navbar.jsx","App.js","reportWebVitals.js","index.js"],"names":["ADD_IMAGE","DELETE_IMAGE","SAVE_FILE","SET_FETCHING","initialState","galleryImages","id","url","file","isFetching","setFetching","bool","type","setImage","dispatch","setTimeout","addImage","galleryReducer","state","action","length","filter","i","reducersBatch","combineReducers","gallery","form","formReducer","store","createStore","applyMiddleware","thunkMiddleware","Loader","className","src","alt","Gallery","this","props","map","onClick","deleteImage","value","onDrop","evt","stopPropagation","preventDefault","imageUrl","dataTransfer","getData","React","PureComponent","connect","Input","hasError","meta","error","touched","console","warn","input","UploadReduxForm","reduxForm","component","componentInfo","reader","FileReader","onSubmit","handleSubmit","name","placeholder","Field","onChange","e","target","files","saveFile","readAsText","onload","jsonObj","JSON","parse","result","img","data","photoUrl","Footer","Navbar","to","window","__store__","App","exact","path","render","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"2VACMA,EAAY,YACZC,EAAe,eACfC,EAAY,YACZC,EAAe,eAEfC,EAAe,CACjBC,cAAe,CACX,CACIC,GAAI,EACJC,IAAK,yGAGT,CACID,GAAI,EACJC,IAAK,kEAGT,CACID,GAAI,EACJC,IAAK,+CAIbC,KAAM,KACNC,YAAY,GAkCHC,EAAc,SAACC,GAAD,MAAW,CAACC,KAAMT,EAAcQ,SAE9CE,EAAW,SAACN,GAAD,OAAS,SAACO,GAC9BA,EAASJ,GAAY,IACrBK,YAAW,WACPD,EARS,SAACP,GAAD,MAAU,CAACK,KAAMZ,EAAWO,OAQ5BS,CAAST,IAClBO,EAASJ,GAAY,MACtB,OAKQO,EA3CQ,WAAqC,IAAnCC,EAAkC,uDAA1Bd,EAAce,EAAY,uCACvD,OAAOA,EAAOP,MACV,KAAKZ,EACD,OAAO,2BACAkB,GADP,IAEIb,cAAc,GAAD,mBAAMa,EAAMb,eAAZ,CAA4B,CAACC,GAAIY,EAAMb,cAAce,OAAS,EAAGb,IAAKY,EAAOZ,SAElG,KAAKN,EACD,OAAO,2BACAiB,GADP,IAEIb,cAAea,EAAMb,cAAcgB,QAAO,SAAAC,GAAC,OAAIA,EAAEhB,KAAOa,EAAOb,QAEvE,KAAKJ,EACD,OAAO,2BACAgB,GADP,IAEIV,KAAMW,EAAOX,OAErB,KAAKL,EACD,OAAO,2BACAe,GADP,IAEIT,WAAYU,EAAOR,OAE3B,QACI,OAAOO,I,iBC9CbK,EAAgBC,YAAgB,CAClCC,QAASR,EACTS,KAAMC,MAQKC,EALDC,YAAYN,EAAeO,YAAgBC,M,uDCC1CC,EANA,WACX,OAAO,qBAAKC,UAAU,qBAAf,SACH,qBAAKC,IAAI,uEAAuEC,IAAI,kBCAtFC,E,4JAEF,WAAU,IAAD,OACL,OAAGC,KAAKC,MAAM7B,WACH,cAAC,EAAD,IAEA,sBAAKwB,UAAU,uBAAf,UACFI,KAAKC,MAAMjC,cAAckC,KAAI,SAAAjB,GAAC,OAAI,8BAC/B,qBAAKW,UAAU,qBAAqBC,IAAKZ,EAAEf,IAAK4B,IAAI,QACpD,wBAAQK,QAAS,kBAAK,EAAKF,MAAMG,YAAYnB,EAAEhB,KAA/C,sBAFuCgB,EAAEhB,OAI7C,uBAAOoC,MAAM,mBAAmB9B,KAAK,MAAM+B,OAAQ,SAACC,GAChDA,EAAIC,kBACJD,EAAIE,iBACJ,IAAIC,EAAWH,EAAII,aAAaC,QAAQ,OACxC,EAAKX,MAAMzB,SAASkC,a,GAflBG,IAAMC,eA2BbC,eALS,SAAClC,GAAD,MAAY,CAChCb,cAAea,EAAMO,QAAQpB,cAC7BI,WAAYS,EAAMO,QAAQhB,cAGU,CAACI,WAAU4B,YHuBxB,SAACnC,GAAD,MAAS,CAACM,KAAMX,EAAcK,QGvB1C8C,CAAkDhB,G,kBC5BpDiB,EAAQ,SAACf,GAClB,IAAMgB,EAAWhB,EAAMiB,KAAKC,OAASlB,EAAMiB,KAAKE,QAGhD,OADAC,QAAQC,KAAKL,GACN,8BACH,iDAAWhB,EAAMsB,OAAWtB,OC+B9BuB,G,OAAkBC,YAAU,CAACpC,KAAM,eAAjBoC,EAnCL,SAACxB,GAEhB,IDMyByB,EAAWC,ECN9BC,EAAS,IAAIC,WAenB,OAAO,sBAAKjC,UAAU,qBAAf,UACK,gDACA,uBAAMA,UAAU,oBAAoBkC,SAAU7B,EAAM8B,aAApD,WDXaL,ECYIV,EDZOW,ECYA,CAACK,KAAM,WAAYzD,KAAM,MAAO0D,YAAa,gBDV1E,8BACH,cAACC,EAAA,EAAD,aAAOR,UAAWA,GAAeC,OCUrB,0CAEJ,qBAAK/B,UAAU,oCAAf,SACI,kCACI,uDACA,uBAAOrB,KAAK,OAAO4D,SAvBf,SAACC,GACrB,IAAIjE,EAAOiE,EAAEC,OAAOC,MAAM,GAC1BrC,EAAMsC,SAASpE,GACfyD,EAAOY,WAAWrE,GAClByD,EAAOa,OAAS,WACZ,IAAIC,EAAUC,KAAKC,MAAMhB,EAAOiB,QAEhC,IAAK,IAAIC,KAAOJ,EAAQ1E,cAEpBiC,EAAMzB,SAASkE,EAAQ1E,cAAc8E,GAAK5E,cAiBpC+B,EAAM9B,MAAQ,2FAAkB8B,EAAM9B,KAAK6D,eAwBlDjB,eAJS,SAAClC,GAAD,MAAY,CAChCV,KAAMU,EAAMO,QAAQjB,QAGgB,CAAEK,WAAU+D,SLF5B,SAACpE,GAAD,MAAW,CAACI,KAAMV,EAAWM,UKEtC4C,EAhBA,SAACd,GAMZ,OAAO,8BACH,cAACuB,EAAD,CAAiBM,SALJ,SAACiB,GACd9C,EAAMzB,SAASuE,EAAKC,WAIiBrE,SAAUsB,EAAMtB,SACpD4D,SAAUtC,EAAMsC,SAAUpE,KAAM8B,EAAM9B,Y,eC1ChC8E,G,OANA,SAAChD,GACZ,OAAO,qBAAKL,UAAU,qBAAf,SACH,4C,QCaOsD,G,OAdA,SAACjD,GACZ,OAAO,sBAAKL,UAAU,eAAf,UAEP,qBAAKC,IAAI,+EAA+EC,IAAI,KAC5F,cAAC,UAAD,CAASqD,GAAG,WAAWvD,UAAU,yBAAjC,qBACA,cAAC,UAAD,CAASuD,GAAG,UAAUvD,UAAU,wBAAhC,yBCcJwD,OAAOC,UAAY9D,EAEJ+D,MAjBH,WACV,OACE,cAAC,IAAD,UACA,cAAC,IAAD,CAAU/D,MAAOA,EAAjB,SACE,sBAAKK,UAAU,MAAf,UACE,cAAC,EAAD,IACA,cAAC,QAAD,CAAO2D,OAAK,EAACC,KAAK,WAAWC,OAAW,kBAAM,cAAC,EAAD,OAC9C,cAAC,QAAD,CAAOF,OAAK,EAACC,KAAK,UAAUC,OAAW,kBAAM,cAAC,EAAD,OAC7C,cAAC,EAAD,YCLOC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASV,OACP,cAAC,IAAMW,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.cfe58b61.chunk.js","sourcesContent":["\r\nconst ADD_IMAGE = \"ADD-IMAGE\";\r\nconst DELETE_IMAGE = \"DELETE-IMAGE\";\r\nconst SAVE_FILE = \"SAVE-FILE\";\r\nconst SET_FETCHING = \"SET-FETCHING\";\r\n\r\nconst initialState = {\r\n    galleryImages: [\r\n        {\r\n            id: 1,\r\n            url: \"https://img.gazeta.ru/files3/919/10756919/upload-shutterstock_113386852-pic4_zoom-1500x1500-69804.jpg\"\r\n        \r\n        },\r\n        {\r\n            id: 2,\r\n            url: \"https://miro.medium.com/max/3840/1*cL5YzEvytic6BqKT4mD0tA.jpeg\"\r\n        \r\n        },\r\n        {\r\n            id: 3,\r\n            url: \"https://lookw.ru/10/1048/1567130325-41.jpg\"\r\n        \r\n        }\r\n    ],\r\n    file: null,\r\n    isFetching: false\r\n};\r\n\r\nconst galleryReducer = ( state = initialState, action ) => {\r\n    switch(action.type) {\r\n        case ADD_IMAGE: \r\n            return {\r\n                ...state,\r\n                galleryImages: [...state.galleryImages, ({id: state.galleryImages.length + 1, url: action.url})]\r\n            };\r\n        case DELETE_IMAGE:\r\n            return {\r\n                ...state,\r\n                galleryImages: state.galleryImages.filter(i => i.id !== action.id)\r\n            };\r\n        case SAVE_FILE:\r\n            return {\r\n                ...state,\r\n                file: action.file\r\n            };\r\n        case SET_FETCHING:\r\n            return {\r\n                ...state,\r\n                isFetching: action.bool\r\n            };\r\n        default:\r\n            return state;\r\n\r\n    }\r\n};\r\n\r\nconst addImage = (url) => ({type: ADD_IMAGE, url});\r\nexport const deleteImage = (id) => ({type: DELETE_IMAGE, id});\r\nexport const saveFile = (file) => ({type: SAVE_FILE, file});\r\nexport const setFetching = (bool) => ({type: SET_FETCHING, bool})\r\n\r\nexport const setImage = (url) => (dispatch) => {\r\n    dispatch(setFetching(true));\r\n    setTimeout(() => {\r\n        dispatch(addImage(url));\r\n        dispatch(setFetching(false));\r\n    }, 5000)\r\n    \r\n};\r\n\r\n\r\nexport default galleryReducer;\r\n\r\n\r\n\r\n\r\n","import { applyMiddleware, combineReducers, createStore } from 'redux';\r\nimport galleryReducer from './gallery-reducer';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport { reducer as formReducer } from 'redux-form';\r\n\r\nconst reducersBatch = combineReducers({\r\n    gallery: galleryReducer,\r\n    form: formReducer\r\n});\r\n\r\nconst store = createStore(reducersBatch, applyMiddleware(thunkMiddleware));\r\n\r\n\r\n\r\n\r\nexport default store;","import React from 'react';\r\nimport './Loader.scss';\r\n\r\n\r\n\r\nconst Loader = () => {\r\n    return <div className=\"App__loader loader\">\r\n        <img src=\"https://cdn.dribbble.com/users/597558/screenshots/1998465/comp-2.gif\" alt=\"loading...\" />\r\n    </div>\r\n};\r\n\r\nexport default Loader;","import React from 'react';\r\nimport './Gallery.scss';\r\nimport { connect } from 'react-redux'\r\nimport { setImage, deleteImage } from '../../redux/gallery-reducer';\r\nimport Loader from '../common/Loader/Loader';\r\n\r\n\r\nclass Gallery extends React.PureComponent {\r\n    \r\n    render() {\r\n        if(this.props.isFetching)\r\n            return <Loader />\r\n        else\r\n            return <div className=\"App__gallery gallery\">\r\n                {this.props.galleryImages.map(i => <p key={i.id}>\r\n                    <img className=\"gallery__card card\" src={i.url} alt=\"img\" />\r\n                    <button onClick={() =>this.props.deleteImage(i.id)}>Delete</button>\r\n                </p>)}\r\n                <input value=\"Drag img here...\" type=\"url\" onDrop={(evt) => {\r\n                    evt.stopPropagation();\r\n                    evt.preventDefault(); \r\n                    var imageUrl = evt.dataTransfer.getData('URL');\r\n                    this.props.setImage(imageUrl);\r\n                    }\r\n                }/> \r\n            </div>\r\n    }\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    galleryImages: state.gallery.galleryImages,\r\n    isFetching: state.gallery.isFetching\r\n});\r\n\r\nexport default connect(mapStateToProps, {setImage, deleteImage})(Gallery);","import React from 'react';\r\nimport { Field } from 'redux-form';\r\n\r\n\r\n\r\n\r\nexport const Input = (props) => {\r\n    const hasError = props.meta.error && props.meta.touched;\r\n\r\n    console.warn(hasError);\r\n    return <div>\r\n        <input {...props.input} {...props}/>\r\n    </div>;\r\n};\r\n\r\nexport const createField = ( component, componentInfo ) => {\r\n    \r\n    return <div>\r\n        <Field component={component} {...componentInfo}/>\r\n    </div>\r\n};","import React from 'react';\r\nimport { reduxForm } from 'redux-form';\r\nimport { connect } from 'react-redux';\r\nimport { createField, Input } from '../common/formsControls/formControls';\r\nimport { setImage, saveFile } from '../../redux/gallery-reducer';\r\nimport './Upload.scss';\r\n\r\nconst UploadForm = (props) => {\r\n\r\n    const reader = new FileReader();\r\n    const jsonFileHandler = (e) => {\r\n        let file = e.target.files[0];\r\n        props.saveFile(file);\r\n        reader.readAsText(file);\r\n        reader.onload = () => {\r\n            let jsonObj = JSON.parse(reader.result);\r\n            \r\n            for (let img in jsonObj.galleryImages) {\r\n                \r\n                props.setImage(jsonObj.galleryImages[img].url);\r\n            };\r\n        };\r\n    };\r\n\r\n    return <div className=\"App__upload upload\">\r\n                <span>Upload image</span>\r\n                <form className=\"upload__form form\" onSubmit={props.handleSubmit}>\r\n                    {createField(Input, {name: \"photoUrl\", type: \"url\", placeholder: \"enter url...\"}) }\r\n                    <button>+</button>\r\n                </form>\r\n                <div className=\"upload__json-wrapper json-wrapper\">\r\n                    <label>\r\n                        <span>Or add json file...</span>\r\n                        <input type=\"file\" onChange={jsonFileHandler}/> \r\n                    </label>\r\n                </div>\r\n                    { props.file && <div>Загружено: { props.file.name }</div> }\r\n\r\n            </div>\r\n};\r\n\r\n\r\nconst UploadReduxForm = reduxForm({form: \"uploadPhoto\"})(UploadForm);\r\n\r\nconst Upload = (props) => {\r\n\r\n    const onSubmit = (data) => {\r\n        props.setImage(data.photoUrl);\r\n    };\r\n\r\n    return <div>\r\n        <UploadReduxForm onSubmit={onSubmit} addImage={props.addImage}\r\n         saveFile={props.saveFile} file={props.file}/>\r\n    </div>;\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    file: state.gallery.file\r\n});\r\n\r\nexport default connect(mapStateToProps, { setImage, saveFile })(Upload);","import React from 'react';\r\nimport './Footer.scss';\r\n\r\n\r\nconst Footer = (props) => {\r\n    return <div className=\"App__footer footer\">\r\n        <span>Life</span>\r\n    </div>\r\n};\r\n\r\nexport default Footer;","import React from 'react';\r\nimport { NavLink } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport './Navbar.scss';\r\n\r\n\r\nconst Navbar = (props) => {\r\n    return <nav className=\"App__nav nav\">\r\n\r\n    <img src=\"https://i.pinimg.com/originals/f6/d1/d2/f6d1d2358b2f812b837915ed0e1f2e72.jpg\" alt=\"\" />\r\n    <NavLink to=\"/gallery\" className=\"nav__gallery-link link\">Gallery</NavLink>\r\n    <NavLink to=\"/upload\" className=\"nav__upload-link link\">Upload</NavLink>    \r\n    \r\n\r\n\r\n    </nav>;\r\n};\r\n\r\n\r\n\r\nexport default Navbar;","import { Provider } from 'react-redux';\nimport './App.scss';\nimport store from './redux/store';\nimport Gallery from './components/Gallery/Gallery';\nimport Upload from './components/Upload/Upload';\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport Footer from './components/Footer/Footer';\nimport Navbar from './components/Navbar/Navbar';\n\nconst App = () => {\n  return (\n    <BrowserRouter>\n    <Provider store={store}>\n      <div className=\"App\">\n        <Navbar/>\n        <Route exact path=\"/gallery\" render = { () => <Gallery /> } />\n        <Route exact path=\"/upload\" render = { () => <Upload /> } />\n        <Footer />\n      </div>\n    </Provider>\n    </BrowserRouter>\n  );\n};\n\nwindow.__store__ = store;\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}